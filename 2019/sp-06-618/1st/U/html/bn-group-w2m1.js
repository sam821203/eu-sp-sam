// depend plugin
// ==========================================================================

// webHref:  大小網連結
// appHref:  app連結
// imgSrc :  圖片絕對路徑，前面請填這包所在的網址
// intro  :  用在滑鼠移到連結上會出現的資訊以及SEO，不填畫面正常，但是為了UX和SEO，建議填，可以複製貼上品名即可
// *** 熱銷精選
window.dataSp = [
    // ====================================== 手動編輯區開始 ======================================
    {
        webHref: "https://www.u-mall.com.tw/c3/63684",
        appHref: "https://m.u-mall.com.tw/c3/63684",
        imgSrc: "bn-group-u-01.png",
        intro: "下殺5折"
    },
    {
        webHref: "https://www.u-mall.com.tw/c3/55359",
        appHref: "https://m.u-mall.com.tw/c3/55359",
        imgSrc: "bn-group-u-02.png",
        intro: "1入$233"
    },
    {
        webHref: "https://www.u-mall.com.tw/c3/107648",
        appHref: "https://m.u-mall.com.tw/c3/107648",
        imgSrc: "bn-group-u-03.png",
        intro: "單盒178元"
    },
    {
        webHref: "https://www.u-mall.com.tw/np/63485",
        appHref: "https://m.u-mall.com.tw/np/63485",
        imgSrc: "bn-group-u-04.png",
        intro: "激殺$9/包"
    },
    {
        webHref: "https://www.u-mall.com.tw/c3/129378",
        appHref: "https://m.u-mall.com.tw/c3/129378",
        imgSrc: "bn-group-u-05.png",
        intro: "預購現折100"
    },
    {
        webHref: "https://www.u-mall.com.tw/c3/94776",
        appHref: "https://m.u-mall.com.tw/c3/94776",
        imgSrc: "bn-group-u-06.png",
        intro: "加碼送羅技喇叭！"
    },
    {
        webHref: "https://www.u-mall.com.tw/i/c2/63304",
        appHref: "https://www.u-mall.com.tw/i/c2/63304",
        imgSrc: "bn-group-u-07.png",
        intro: "新機98折"
    },
    {
        webHref: "https://www.u-mall.com.tw/c2/63295",
        appHref: "https://www.u-mall.com.tw/c2/63295",
        imgSrc: "bn-group-u-08.png",
        intro: "imax新品上市"
    },
    {
        webHref: "https://www.u-mall.com.tw/c2/31563",
        appHref: "https://www.u-mall.com.tw/c2/31563",
        imgSrc: "bn-group-u-09.png",
        intro: "抽dyson"
    },
    {
        webHref: "https://www.u-mall.com.tw/XML/content/DMSetting/Final/201905/SP_1104520/w/index.html",
        appHref: "https://www.u-mall.com.tw/XML/content/DMSetting/Final/201905/SP_1104520/w/index.html",
        imgSrc: "bn-group-u-10.png",
        intro: "登記抽刀具組"
    },
    {
        webHref: "https://www.u-mall.com.tw/np/63590",
        appHref: "https://www.u-mall.com.tw/np/63590",
        imgSrc: "bn-group-u-11.png",
        intro: "下殺4.5折"
    },
    {
        webHref: "https://www.u-mall.com.tw/np/60064",
        appHref: "https://www.u-mall.com.tw/np/60064",
        imgSrc: "bn-group-u-12.png",
        intro: "下殺4折"
    },
    {
        webHref: "https://www.u-mall.com.tw/XML/content/DMSetting/Final/201905/SP_1104485/w/index.html",
        appHref: "https://www.u-mall.com.tw/XML/content/DMSetting/Final/201905/SP_1104485/w/index.html",
        imgSrc: "bn-group-u-13.png",
        intro: "森森獨賣款"
    },
    {
        webHref: "https://www.u-mall.com.tw/XML/content/DMSetting/Final/201905/SP_1104539/w/index.html",
        appHref: "https://www.u-mall.com.tw/XML/content/DMSetting/Final/201905/SP_1104539/w/index.html",
        imgSrc: "bn-group-u-14.png",
        intro: "下殺7折"
    },
    {
        webHref: "https://www.u-mall.com.tw/XML/content/DMSetting/Final/201905/SP_1104546/w/index.html",
        appHref: "https://www.u-mall.com.tw/XML/content/DMSetting/Final/201905/SP_1104546/w/index.html",
        imgSrc: "bn-group-u-15.png",
        intro: "玩郵輪6,800up"
    },
    {
        webHref: "https://www.u-mall.com.tw/XML/content/DMSetting/Final/201905/SP_1104546/w/index.html",
        appHref: "https://www.u-mall.com.tw/XML/content/DMSetting/Final/201905/SP_1104546/w/index.html",
        imgSrc: "bn-group-u-16.png",
        intro: "暑假玩迪士尼免1萬"
    },
    // ====================================== 手動編輯區結束 ======================================
];
// 與使用var意思相同，window 全域變數
window.dataSp__carousel2 = [
    // ====================================== 手動編輯區開始 ======================================
    {
        webHref: 'https://www.u-mall.com.tw/XML/content/DMSetting/Final/201906/SP_1104513/w/index.html',
        appHref: 'https://www.u-mall.com.tw/XML/content/DMSetting/Final/201906/SP_1104513/w/index.html',
        imgSrc: 'bn-group-c2-u-01.jpg',
        intro: '滿額加價購',
    },
    {
        webHref: 'https://www.u-mall.com.tw/XML/content/DMSetting/Final/201906/SP_1104582/w/index.html',
        appHref: 'https://www.u-mall.com.tw/XML/content/DMSetting/Final/201906/SP_1104582/w/index.html',
        imgSrc: 'bn-group-c2-u-02.jpg',
        intro: '肯德基',
    },
    {
        webHref: 'https://www.u-mall.com.tw/XML/content/DMSetting/Final/201906/SP_1104589/w/index.html',
        appHref: 'https://www.u-mall.com.tw/XML/content/DMSetting/Final/201906/SP_1104589/w/index.html',
        imgSrc: 'bn-group-c2-u-03.jpg',
        intro: '萊爾富',
    },
    {
        webHref: 'https://www.u-mall.com.tw/XML/content/DMSetting/Final/201906/SP_1104557/w/index.html',
        appHref: 'https://www.u-mall.com.tw/XML/content/DMSetting/Final/201906/SP_1104557/w/index.html',
        imgSrc: 'bn-group-c2-u-04.jpg',
        intro: '機動不已',
    },
    {
        webHref: 'https://www.u-mall.com.tw/c3/131108',
        appHref: 'https://m.u-mall.com.tw/c3/131108',
        imgSrc: 'bn-group-c2-u-05.jpg',
        intro: '3C資訊',
    },
    {
        webHref: 'https://www.u-mall.com.tw/XML/content/DMSetting/Final/201906/SP_1104553/w/index.html',
        appHref: 'https://www.u-mall.com.tw/XML/content/DMSetting/Final/201906/SP_1104553/w/index.html',
        imgSrc: 'bn-group-c2-u-06.jpg',
        intro: '3C資訊',
    },
    {
        webHref: 'https://www.u-mall.com.tw/XML/content/DMSetting/Final/201905/SP_1104539/w/index.html',
        appHref: 'https://www.u-mall.com.tw/XML/content/DMSetting/Final/201905/SP_1104539/w/index.html',
        imgSrc: 'bn-group-c2-u-07.jpg',
        intro: '傢寢',
    },
    {
        webHref: 'https://www.u-mall.com.tw/XML/content/DMSetting/Final/201905/SP_1104546/w/index.html',
        appHref: 'https://www.u-mall.com.tw/XML/content/DMSetting/Final/201905/SP_1104546/w/index.html',
        imgSrc: 'bn-group-c2-u-08.jpg',
        intro: '旅遊',
    },
    // ====================================== 手動編輯區結束 ======================================
];

// 熱銷精選
makeSliderDOM("bnGroupW2m1", dataSp);

var bnGroupW2m1 = $('#bnGroupW2m1');
var btnPrevBnGroupW2m1 = $('#btnPrevBnGroupW2m1');
var btnNextBnGroupW2m1 = $('#btnNextBnGroupW2m1');

bnGroupW2m1.slick({
    dots: true,
    slidesToShow: 2,
    slidesToScroll: 2,
    autoplay: true,
    autoplaySpeed: 3500,
    prevArrow: btnPrevBnGroupW2m1,
    nextArrow: btnNextBnGroupW2m1,
    responsive: [{
        breakpoint: 768,
        settings: {
            slidesToShow: 1,
            slidesToScroll: 1,
            fade: true,
            cssEase: 'linear'
        }
    }],
});

// 超值活動
makeSliderDOM("bnGroupW2m1__carousel2", dataSp__carousel2);
var bnGroupW2m1__carousel2 = $('#bnGroupW2m1__carousel2');
var btnPrevBnGroupW2m1__carousel2 = $('#btnPrevBnGroupW2m1__carousel2');
var btnNextBnGroupW2m1__carousel2 = $('#btnNextBnGroupW2m1__carousel2');

bnGroupW2m1__carousel2.slick({
    dots: true,
    slidesToShow: 2,
    slidesToScroll: 2,
    autoplay: true,
    autoplaySpeed: 3500,
    prevArrow: btnPrevBnGroupW2m1__carousel2,
    nextArrow: btnNextBnGroupW2m1__carousel2,
    responsive: [{
        breakpoint: 768,
        settings: {
            slidesToShow: 1,
            slidesToScroll: 1,
            fade: true,
            cssEase: 'linear'
        }
    }],
});


function makeSliderDOM(wrapId, dataSrc) {
    var eventZone = document.getElementById(wrapId);
    eventZone.innerHTML = "";

    dataSrc.forEach(function (el) {
        var eventAnchor = document.createElement('a');
        var eventImg = document.createElement('img');

        // eventAnchor.target = "_blank";
        eventAnchor.title = el.intro;
        eventAnchor.href = detectApp(el);
        eventImg.src = el.imgSrc;
        eventImg.alt = el.intro;

        eventAnchor.appendChild(eventImg);
        eventZone.appendChild(eventAnchor);
    });
}

function detectApp(el) {
    var isUiWebview = /(WebView|(iPhone|iPod|iPad)(?!.*Safari\/)(?!.*Line\/)|Android.*(wv|.0.0.0))(?!.*Line\/)/gi.test(navigator.userAgent);
    if (isUiWebview) return el.appHref;
    else return el.webHref;
}
