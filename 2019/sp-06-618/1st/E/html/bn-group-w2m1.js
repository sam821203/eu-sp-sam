// depend plugin
// ==========================================================================

// webHref:  大小網連結
// appHref:  app連結
// imgSrc :  圖片絕對路徑，前面請填這包所在的網址
// intro  :  用在滑鼠移到連結上會出現的資訊以及SEO，不填畫面正常，但是為了UX和SEO，建議填，可以複製貼上品名即可

window.dataSp = [
    // ====================================== 手動編輯區開始 ======================================
    {
        webHref: "https://www.etmall.com.tw/XML/content/DMSetting/Final/201906/SP_1108173/w/index.html",
        appHref: "etmall://open?pgid=44&url=https%3a%2f%2fwww.etmall.com.tw%2fXML%2fcontent%2fDMSetting%2fFinal%2f201906%2fSP_1108173%2fm%2fapp.html&t=DeMon%e5%86%b0%e7%b3%96%e7%87%95%e7%aa%a9%e7%be%8e%e9%ba%97%e4%b8%8a%e5%b8%82%e2%94%82ETMall%e6%9d%b1%e6%a3%ae%e8%b3%bc%e7%89%a9%e7%b6%b2",
        imgSrc: "bn-group-e-01.png",
        intro: "再送千元禮券"
    },
    {
        webHref: "https://www.etmall.com.tw/np/64075",
        appHref: "etmall://open?pgid=65&eid=64075",
        imgSrc: "bn-group-e-02.png",
        intro: "SK-II 明星商品"
    },
    {
        webHref: "https://www.etmall.com.tw/np/74562",
        appHref: "etmall://open?pgid=65&eid=74562",
        imgSrc: "bn-group-e-03.png",
        intro: "下殺85折"
    },
    {
        webHref: "https://www.etmall.com.tw/np/74573",
        appHref: "etmall://open?pgid=65&eid=74573",
        imgSrc: "bn-group-e-04.png",
        intro: "滿額贈好禮"
    },
    {
        webHref: "https://www.etmall.com.tw/c3/115052",
        appHref: "etmall://open?pgid=8&cd=115052",
        imgSrc: "bn-group-e-05.png",
        intro: "預購現折100"
    },
    {
        webHref: "https://www.etmall.com.tw/c3/49065",
        appHref: "etmall://open?pgid=8&sd=3&cd=49065",
        imgSrc: "bn-group-e-06.png",
        intro: "加碼送羅技喇叭！"
    },
    {
        webHref: "https://www.etmall.com.tw/c2/107788",
        appHref: "etmall://open?pgid=8&cd=107788",
        imgSrc: "bn-group-e-07.png",
        intro: "新機98折"
    },
    {
        webHref: "https://www.etmall.com.tw/c2/107790",
        appHref: "etmall://open?pgid=8&cd=107788",
        imgSrc: "bn-group-e-08.png",
        intro: "imax新品上市"
    },
    {
        webHref: "https://www.etmall.com.tw/c2/40147",
        appHref: "etmall://open?pgid=8&sd=4416&cd=40147",
        imgSrc: "bn-group-e-09.png",
        intro: "抽dyson"
    },
    {
        webHref: "https://www.etmall.com.tw/XML/content/DMSetting/Final/201905/SP_1108156/w/index.html",
        appHref: "etmall://open?pgid=44&url=https%3a%2f%2fwww.etmall.com.tw%2fXML%2fcontent%2fDMSetting%2fFinal%2f201905%2fSP_1108156%2fm%2fapp.html&t=DYSON%e7%8b%82%e6%ad%a1%e6%85%b6-E%e2%94%82ETMall%e6%9d%b1%e6%a3%ae%e8%b3%bc%e7%89%a9%e7%b6%b2",
        imgSrc: "bn-group-e-10.png",
        intro: "登記抽刀具組"
    },
    {
        webHref: "https://www.etmall.com.tw/p/67031",
        appHref: "etmall://open?pgid=44&url=https%3A%2F%2Fwww.etmall.com.tw%2Fp%2F67031&t=%E3%80%90EASY%20SHOP%E3%80%91%E6%80%A7%E6%84%9FV%E5%8C%85%E8%A6%86!%20%E5%85%A7%E8%A1%A3%24260up%2F%E5%B0%8F%E8%A4%B2%24100up",
        imgSrc: "bn-group-e-11.png",
        intro: "小褲$100up"
    },
    {
        webHref: "https://www.etmall.com.tw/c1/130737",
        appHref: "etmall://open?pgid=9&sd=31772&cd=130737",
        imgSrc: "bn-group-e-12.png",
        intro: "下殺990起"
    },
    {
        webHref: "https://www.etmall.com.tw/p/66085",
        appHref: "etmall://open?pgid=53&eid=66085",
        imgSrc: "bn-group-e-13.png",
        intro: "滿千再折百"
    },
    {
        webHref: "https://www.etmall.com.tw/XML/content/DMSetting/Final/201905/SP_1108200/w/index.html",
        appHref: "etmall://open?pgid=44&url=https%3a%2f%2fwww.etmall.com.tw%2fXML%2fcontent%2fDMSetting%2fFinal%2f201905%2fSP_1108200%2fm%2fapp.html&t=%e9%80%b1%e9%80%b1%e6%8a%98%e6%89%a3%e6%9c%80%e5%84%aa%e6%83%a0%e2%94%82ETMall%e6%9d%b1%e6%a3%ae%e8%b3%bc%e7%89%a9%e7%b6%b2",
        imgSrc: "bn-group-e-14.png",
        intro: "結帳再折100"
    },
    {
        webHref: "https://www.etmall.com.tw/XML/content/DMSetting/Final/201905/SP_1108195/w/index.html",
        appHref: "etmall://open?pgid=44&url=https%3a%2f%2fwww.etmall.com.tw%2fXML%2fcontent%2fDMSetting%2fFinal%2f201905%2fSP_1108195%2fm%2fapp.html&t=%e2%98%85%e5%a4%8f%e5%ad%a3%e6%97%85%e5%b1%95+%e6%bb%bf%e8%90%ac%e9%80%81%e9%a4%90%e5%88%b8%7e%e5%9c%8b%e5%a4%96%e2%94%82ETMall%e6%9d%b1%e6%a3%ae%e8%b3%bc%e7%89%a9%e7%b6%b2",
        imgSrc: "bn-group-e-15.png",
        intro: "暑假玩迪士尼免1萬"
    },
    {
        webHref: "https://www.etmall.com.tw/XML/content/DMSetting/Final/201905/SP_1108195/w/index.html",
        appHref: "etmall://open?pgid=44&url=https%3a%2f%2fwww.etmall.com.tw%2fXML%2fcontent%2fDMSetting%2fFinal%2f201905%2fSP_1108195%2fm%2fapp.html&t=%e2%98%85%e5%a4%8f%e5%ad%a3%e6%97%85%e5%b1%95+%e6%bb%bf%e8%90%ac%e9%80%81%e9%a4%90%e5%88%b8%7e%e5%9c%8b%e5%a4%96%e2%94%82ETMall%e6%9d%b1%e6%a3%ae%e8%b3%bc%e7%89%a9%e7%b6%b2",
        imgSrc: "bn-group-e-16.png",
        intro: "玩日本現折$5,000"
    },
    // ====================================== 手動編輯區結束 ======================================
];
// 與使用var意思相同，window 全域變數
window.dataSp__carousel2 = [
    // ====================================== 手動編輯區開始 ======================================
    {
        webHref: 'https://www.etmall.com.tw/XML/content/DMSetting/Final/201906/SP_1108142/w/index.html',
        appHref: 'etmall://open?pgid=44&url=https%3a%2f%2fwww.etmall.com.tw%2fXML%2fcontent%2fDMSetting%2fFinal%2f201906%2fSP_1108142%2fm%2fapp.html&t=6%E6%9C%88%E4%BB%BD%E5%85%A8%E7%AB%99%E6%BB%BF%E9%A1%8D%E5%8A%A0%E5%83%B9%E8%B3%BC%E2%94%82ETMall%E6%9D%B1%E6%A3%AE%E8%B3%BC%E7%89%A9%E7%B6%B2',
        imgSrc: 'bn-group-c2-e-01.jpg',
        intro: '滿額加價購',
    },
    {
        webHref: 'https://www.etmall.com.tw/XML/content/DMSetting/Final/201906/SP_1108246/w/index.html',
        appHref: 'etmall://open?pgid=44&url=https%3a%2f%2fwww.etmall.com.tw%2fXML%2fcontent%2fDMSetting%2fFinal%2f201906%2fSP_1108246%2fm%2fapp.html&t=0601-0831_%E6%9D%B1%E6%A3%AE%E8%B3%BC%E7%89%A9x%E8%82%AF%E5%BE%B7%E5%9F%BAx%E5%BF%85%E5%8B%9D%E5%AE%A2%E2%94%82ETMall%E6%9D%B1%E6%A3%AE%E8%B3%BC%E7%89%A9%E7%B6%B2',
        imgSrc: 'bn-group-c2-e-02.jpg',
        intro: '肯德基',
    },
    {
        webHref: 'https://www.etmall.com.tw/XML/content/DMSetting/Final/201906/SP_1108258/w/index.html',
        appHref: 'etmall://open?pgid=44&url=https%3a%2f%2fwww.etmall.com.tw%2fXML%2fcontent%2fDMSetting%2fFinal%2f201906%2fSP_1108258%2fm%2fapp.html&t=0601-0630_%E8%90%8A%E7%88%BE%E5%AF%8C_%E7%AA%81%E7%A0%B420%E8%90%AC%E4%BB%B6%E5%95%86%E5%93%81%E5%95%A6!!%E2%94%82ETMall%E6%9D%B1%E6%A3%AE%E8%B3%BC%E7%89%A9%E7%B6%B2',
        imgSrc: 'bn-group-c2-e-03.jpg',
        intro: '萊爾富',
    },
    {
        webHref: 'https://www.etmall.com.tw/XML/content/DMSetting/Final/201906/SP_1108211/w/index.html',
        appHref: 'etmall://open?pgid=44&url=https%3a%2f%2fwww.etmall.com.tw%2fXML%2fcontent%2fDMSetting%2fFinal%2f201906%2fSP_1108211%2fm%2fapp.html&t=0603-0701_%E5%86%B7%E6%B0%A3%E5%B0%88%E6%A1%88%E2%94%82ETMall%E6%9D%B1%E6%A3%AE%E8%B3%BC%E7%89%A9%E7%B6%B2',
        imgSrc: 'bn-group-c2-e-04.jpg',
        intro: '冷氣專案',
    },
    {
        webHref: 'https://www.etmall.com.tw/XML/content/DMSetting/Final/201905/SP_1108156/w/index.html',
        appHref: 'etmall://open?pgid=44&url=https%3a%2f%2fwww.etmall.com.tw%2fXML%2fcontent%2fDMSetting%2fFinal%2f201905%2fSP_1108156%2fm%2fapp.html&t=DYSON%e7%8b%82%e6%ad%a1%e6%85%b6-E%e2%94%82ETMall%e6%9d%b1%e6%a3%ae%e8%b3%bc%e7%89%a9%e7%b6%b2',
        imgSrc: 'bn-group-c2-e-05.jpg',
        intro: '家電',
    },
    {
        webHref: 'https://www.etmall.com.tw/np/64075',
        appHref: 'etmall://open?pgid=65&eid=64075',
        imgSrc: 'bn-group-c2-e-06.jpg',
        intro: '美妝',
    },
    {
        webHref: 'https://www.etmall.com.tw/np/74554',
        appHref: 'etmall://open?pgid=65&eid=74554',
        imgSrc: 'bn-group-c2-e-07.jpg',
        intro: '保健',
    },
    {
        webHref: 'https://www.etmall.com.tw/c1/130737',
        appHref: 'etmall://open?pgid=9&sd=31772&cd=130737',
        imgSrc: 'bn-group-c2-e-08.jpg',
        intro: '流行',
    },
    // ====================================== 手動編輯區結束 ======================================
];

// 熱銷精選
makeSliderDOM("bnGroupW2m1", dataSp);

var bnGroupW2m1 = $('#bnGroupW2m1');
var btnPrevBnGroupW2m1 = $('#btnPrevBnGroupW2m1');
var btnNextBnGroupW2m1 = $('#btnNextBnGroupW2m1');

bnGroupW2m1.slick({
    dots: true,
    slidesToShow: 2,
    slidesToScroll: 2,
    autoplay: true,
    autoplaySpeed: 3500,
    prevArrow: btnPrevBnGroupW2m1,
    nextArrow: btnNextBnGroupW2m1,
    responsive: [{
        breakpoint: 768,
        settings: {
            slidesToShow: 1,
            slidesToScroll: 1,
            fade: true,
            cssEase: 'linear'
        }
    }],
});

// 超值活動
makeSliderDOM("bnGroupW2m1__carousel2", dataSp__carousel2);
var bnGroupW2m1__carousel2 = $('#bnGroupW2m1__carousel2');
var btnPrevBnGroupW2m1__carousel2 = $('#btnPrevBnGroupW2m1__carousel2');
var btnNextBnGroupW2m1__carousel2 = $('#btnNextBnGroupW2m1__carousel2');

bnGroupW2m1__carousel2.slick({
    dots: true,
    slidesToShow: 2,
    slidesToScroll: 2,
    autoplay: true,
    autoplaySpeed: 3500,
    prevArrow: btnPrevBnGroupW2m1__carousel2,
    nextArrow: btnNextBnGroupW2m1__carousel2,
    responsive: [{
        breakpoint: 768,
        settings: {
            slidesToShow: 1,
            slidesToScroll: 1,
            fade: true,
            cssEase: 'linear'
        }
    }],
});


function makeSliderDOM(wrapId, dataSrc) {
    var eventZone = document.getElementById(wrapId);
    eventZone.innerHTML = "";

    dataSrc.forEach(function (el) {
        var eventAnchor = document.createElement('a');
        var eventImg = document.createElement('img');

        // eventAnchor.target = "_blank";
        eventAnchor.title = el.intro;
        eventAnchor.href = detectApp(el);
        eventImg.src = el.imgSrc;
        eventImg.alt = el.intro;

        eventAnchor.appendChild(eventImg);
        eventZone.appendChild(eventAnchor);
    });
}

function detectApp(el) {
    var isUiWebview = /(WebView|(iPhone|iPod|iPad)(?!.*Safari\/)(?!.*Line\/)|Android.*(wv|.0.0.0))(?!.*Line\/)/gi.test(navigator.userAgent);
    if (isUiWebview) return el.appHref;
    else return el.webHref;
}
