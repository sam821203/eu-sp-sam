const e=new fabric.Canvas("canvas",{width:bannerWidth,height:bannerHeight,backgroundColor:"transparent"}),t=e=>document.getElementById(e),a=t("foregroundSwitch"),n=t("canvasWrap");let o,r;function c(e){return e.preventDefault(),e.stopPropagation(),!1}function i(e){e.preventDefault(),e.stopPropagation();const t=e.dataTransfer.files,a=new FileReader;a.readAsDataURL(t[0]),r=t[0].name.split(/\.(png|svg|jpe?g|gif)$/)[0],a.onload=(e=>{const t=e.target.result,a=document.createElement("img");a.src=t,o=a,setTimeout(function(){s(e)},0)})}function s(a){const n=t("canvasWrap"),r=t("btnReadyToSave"),c=document.querySelector("#foreground span"),s=new fabric.Image(o,{width:o.naturalWidth,height:o.naturalHeight,top:0,left:0});n.style.pointerEvents="none",e.discardActiveObject(),e.add(s),n.removeEventListener("drop",i,!1),c.remove(),r.classList.add("active"),r.onclick=function(){l(),setTimeout(u,500)}}function d(){const e=t("canvasWrap"),n=t("foreground");!0===a.checked?(e.classList.add("active"),n.classList.add("active")):(e.classList.remove("active"),n.classList.remove("active"))}function l(){fabric.Image.fromURL("foreground.png",function(t){t.scaleToWidth(95),t.scaleToHeight(90),t.set({top:0,left:0,hoverCursor:"default",selectable:!1}),e.add(t),e.discardActiveObject(),e.sendToBack(e.item(0))})}function u(){const a=t("btnSaveImg"),n=document.querySelector(".options__wrap .alert__wrap");a.href=e.toDataURL({format:"jpeg",quality:bannerQuality}),a.download=r+"_masked.jpg",a.click(),n.classList.add("active"),setTimeout(function(){location.reload()},2e3)}n.addEventListener("dragenter",c,!1),n.addEventListener("dragover",c,!1),n.addEventListener("drop",i,!1);